<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üì¶ Inventory Tracker</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 1rem;
      background: #f4f4f4;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 1rem;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
    }
    form, .buttons {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 1rem;
    }
    input, button, select {
      padding: 0.5rem;
      font-size: 1rem;
      flex: 1;
    }
    table {
      width: 100%;
      margin-top: 1rem;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üì¶ Inventory Tracker</h1>

    <form id="itemForm">
      <input type="text" id="itemName" placeholder="Item Name üèä" required />
      <input type="number" id="itemQty" placeholder="Quantity" required />
      <button type="submit">Add Item</button>
    </form>

    <div class="buttons">
      <select id="sortSelect">
        <option value="">Sort By</option>
        <option value="name">Name (A‚ÄìZ)</option>
        <option value="qty">Quantity (Low‚ÄìHigh)</option>
      </select>
      <input type="text" id="filterInput" placeholder="Filter by name..." />
    </div>

    <div class="buttons">
      <button onclick="exportCSV()">Export CSV</button>
      <button onclick="exportPDF()">Export PDF</button>
      <input type="file" id="csvImport" accept=".csv" />
      <button onclick="syncToCloud()">Sync to Google Sheet ‚òÅÔ∏è</button>
    </div>

    <table id="inventoryTable">
      <thead>
        <tr><th>Item</th><th>Quantity</th><th>Actions</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const form = document.getElementById('itemForm');
    const tableBody = document.querySelector('#inventoryTable tbody');
    const csvInput = document.getElementById('csvImport');
    const sortSelect = document.getElementById('sortSelect');
    const filterInput = document.getElementById('filterInput');

    let inventory = JSON.parse(localStorage.getItem('inventory')) || [];

    function saveInventory() {
      localStorage.setItem('inventory', JSON.stringify(inventory));
      renderTable();
    }

    function renderTable() {
      let filtered = [...inventory];
      const sortBy = sortSelect.value;
      const filterText = filterInput.value.toLowerCase();

      if (filterText) {
        filtered = filtered.filter(item => item.name.toLowerCase().includes(filterText));
      }

      if (sortBy === 'name') {
        filtered.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sortBy === 'qty') {
        filtered.sort((a, b) => a.qty - b.qty);
      }

      tableBody.innerHTML = '';
      filtered.forEach((item, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${item.name}</td>
          <td>${item.qty}</td>
          <td><button onclick="removeItem(${index})">‚ùå</button></td>
        `;
        tableBody.appendChild(row);
      });
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('itemName').value;
      const qty = parseInt(document.getElementById('itemQty').value);
      inventory.push({ name, qty });
      saveInventory();
      form.reset();
    });

    function removeItem(index) {
      inventory.splice(index, 1);
      saveInventory();
    }

    function exportCSV() {
      const rows = [['Item', 'Quantity'], ...inventory.map(i => [i.name, i.qty])];
      const csv = rows.map(r => r.join(',')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'inventory.csv';
      a.click();
    }

    function exportPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text('Inventory List', 10, 10);
      inventory.forEach((item, i) => {
        doc.text(`${item.name}: ${item.qty}`, 10, 20 + i * 10);
      });
      doc.save('inventory.pdf');
    }

    csvInput.addEventListener('change', e => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        const lines = e.target.result.split('\n').slice(1);
        lines.forEach(line => {
          const [name, qty] = line.split(',');
          if (name && qty) inventory.push({ name: name.trim(), qty: parseInt(qty.trim()) });
        });
        saveInventory();
      };
      reader.readAsText(file);
    });

    sortSelect.addEventListener('change', renderTable);
    filterInput.addEventListener('input', renderTable);

    function syncToCloud() {
      const url = 'YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE'; // Replace with your actual URL
      inventory.forEach(item => {
        fetch(url, {
          method: 'POST',
          body: JSON.stringify(item),
          headers: { 'Content-Type': 'application/json' }
        });
      });
      alert('Synced to Google Sheet!');
    }

    renderTable();
  </script>
</body>
</html>
